{
	"info": {
		"_postman_id": "43110232-05a2b5af-74fb-4497-83ea-595a359274f8",
		"name": "Feedback collection",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Get feedback list",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "778d4240-fb88-4196-9a77-696369b71abd",
						"exec": [
							"// Test 1: Verify status code is 200",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"// Parse the JSON response",
							"var jsonData = pm.response.json();",
							"",
							"// Test 2: Verify response has the correct structure",
							"pm.test(\"Response has correct structure (success, count, and data fields)\", function () {",
							"    pm.expect(jsonData).to.have.property('success');",
							"    pm.expect(jsonData).to.have.property('count');",
							"    pm.expect(jsonData).to.have.property('data');",
							"});",
							"",
							"// Test 3: Verify success field is true",
							"pm.test(\"Success field is true\", function () {",
							"    pm.expect(jsonData.success).to.be.true;",
							"});",
							"",
							"// Test 4: Verify count matches actual number of items in data array",
							"pm.test(\"Count field matches the actual number of items in data array\", function () {",
							"    pm.expect(jsonData.count).to.eql(jsonData.data.length);",
							"});",
							"",
							"// Test 5: Verify data is an array",
							"pm.test(\"Data is an array\", function () {",
							"    pm.expect(jsonData.data).to.be.an('array');",
							"});",
							"",
							"// Test 6 & 7: Verify each feedback item has required fields with correct types",
							"pm.test(\"Each feedback item contains required fields with correct types\", function () {",
							"    jsonData.data.forEach(function(item, index) {",
							"        pm.expect(item, `Item ${index} should have id`).to.have.property('id');",
							"        pm.expect(item, `Item ${index} should have date`).to.have.property('date');",
							"        pm.expect(item, `Item ${index} should have title`).to.have.property('title');",
							"        pm.expect(item, `Item ${index} should have email`).to.have.property('email');",
							"        pm.expect(item, `Item ${index} should have description`).to.have.property('description');",
							"        ",
							"        // Verify field types",
							"        pm.expect(item.id, `Item ${index} id should be a number`).to.be.a('number');",
							"        pm.expect(item.date, `Item ${index} date should be a string`).to.be.a('string');",
							"        pm.expect(item.title, `Item ${index} title should be a string`).to.be.a('string');",
							"        pm.expect(item.email, `Item ${index} email should be a string`).to.be.a('string');",
							"        pm.expect(item.description, `Item ${index} description should be a string`).to.be.a('string');",
							"    });",
							"});",
							"",
							"// Test 8: Verify email format is valid",
							"pm.test(\"Email format is valid for all feedback items\", function () {",
							"    var emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;",
							"    jsonData.data.forEach(function(item, index) {",
							"        pm.expect(item.email, `Item ${index} email should be valid`).to.match(emailRegex);",
							"    });",
							"});",
							"",
							"// Test 9: Verify count is a non-negative number",
							"pm.test(\"Count is a non-negative number\", function () {",
							"    pm.expect(jsonData.count).to.be.a('number');",
							"    pm.expect(jsonData.count).to.be.at.least(0);",
							"});",
							"",
							"// Test 10: If data array has items, validate the structure of the first item",
							"pm.test(\"First item has valid structure (if data array is not empty)\", function () {",
							"    if (jsonData.data.length > 0) {",
							"        var firstItem = jsonData.data[0];",
							"        ",
							"        pm.expect(firstItem).to.have.property('id');",
							"        pm.expect(firstItem).to.have.property('date');",
							"        pm.expect(firstItem).to.have.property('title');",
							"        pm.expect(firstItem).to.have.property('email');",
							"        pm.expect(firstItem).to.have.property('description');",
							"        ",
							"        pm.expect(firstItem.id).to.be.a('number');",
							"        pm.expect(firstItem.date).to.be.a('string');",
							"        pm.expect(firstItem.title).to.be.a('string');",
							"        pm.expect(firstItem.email).to.be.a('string');",
							"        pm.expect(firstItem.description).to.be.a('string');",
							"        ",
							"        var emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;",
							"        pm.expect(firstItem.email).to.match(emailRegex);",
							"    }",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"id": "43110232-194e7345-bce4-4426-83fc-c6aa7101d52f",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{baseUrl}}/api/feedback",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"feedback"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get single feedback item",
			"id": "43110232-7f3f4879-70f6-4be8-a044-15fb1a99bdf0",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{baseUrl}}/api/feedback/:id",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"feedback",
						":id"
					],
					"variable": [
						{
							"key": "id",
							"value": "1"
						}
					]
				}
			},
			"response": []
		}
	]
}